// Special Shoutout to Pat G. for these utility functions

export function getToken() {
    // get the token from local storage, return if unexpired
    const token = localStorage.getItem('token')
    if (!token) return null
    const payload = token.split('.')[1]
    const decodedPayload = atob(payload)
    const parsedPayload = JSON.parse(decodedPayload)
    if (parsedPayload.exp < Date.now() / 1000) {
        // Token has expired - remove it
        localStorage.removeItem('token')
        return null
    } else {
        return token
    }
}



export function getUser() {
    const token = getToken()
    if (token) {
    const payload = token.split('.')[1]
    const decodedPayload = atob(payload)
    const parsedPayload = JSON.parse(decodedPayload)
    return parsedPayload.user
    } else {
        return null
    }
}